{{- define "main" -}}
<div class="w-full">
    <div
        class="flex flex-col sm:flex-row sm:justify-between w-full items-start sm:items-end gap-2 sm:gap-0 mb-4"
    >
        <h3
            class="text-2xl sm:text-3xl font-semibold underline decoration-6 sm:decoration-8 decoration-mondrian_yellow"
        >
            Blogroll
        </h3>
        <span class="h-max">
            <p class="text-xs font-mono text-mondrian_dark_gray">
                {{- if .Site.Data.blogroll -}} {{ len .Site.Data.blogroll }}
                recent posts from feeds I follow {{- else -}} feeds I follow {{-
                end -}}
            </p>
        </span>
    </div>
    {{- if .Site.Data.blogroll -}} {{- /* Desktop table view */ -}}
    <div class="hidden md:block overflow-x-auto mb-4">
        <table class="w-full border-collapse border border-mondrian_white">
            <thead>
                <tr
                    class="border-b border-b-mondrian_black bg-mondrian_white text-left font-sans"
                >
                    <th class="w-1/12 pl-1" scope="col">Date</th>
                    <th class="w-1/2 pl-1" scope="col">Post</th>
                    <th class="w-1/6 pl-1" scope="col">Source</th>
                    <th class="w-1/12 pl-1" scope="col">Link</th>
                </tr>
            </thead>
            <tbody>
                {{- range .Site.Data.blogroll -}}
                <tr
                    class="border-b border-b-mondrian_dark_gray hover:bg-mondrian_light_gray"
                >
                    <td class="text-left font-mono text-xs align-top pt-1 pl-1">
                        <time datetime="{{- .date -}}">
                            {{- .date | dateFormat "Jan 2, 2006" -}}
                        </time>
                    </td>
                    <td class="text-sm align-top py-1 pl-1" scope="row">
                        {{- .title -}}
                    </td>
                    <td class="text-left font-mono text-xs align-top pt-1 pl-1">
                        <a
                            href="https://{{- .domain -}}"
                            class="inline-flex items-center gap-2 hover:underline hover:text-mondrian_blue transition-colors"
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label="Visit {{- .domain -}}"
                            ><span
                                class="w-2 h-2 bg-mondrian_red rounded-full border border-mondrian_black"
                            >
                            </span
                            >{{- .domain -}}</a
                        >
                    </td>
                    <td class="align-top p-1">
                        <a
                            href="{{- .url -}}"
                            class="w-full text-xs py-1 px-1 border border-mondrian_black shadow-mondrian font-mono transition-colors bg-mondrian_white hover:bg-mondrian_blue hover:text-mondrian_white text-center inline-block focus:outline focus:outline-offset-2 focus:outline-mondrian_blue"
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label="Open {{- .title -}} in a new tab"
                        >
                            LINK →</a
                        >
                    </td>
                </tr>
                {{- end -}}
            </tbody>
        </table>
    </div>

    {{- /* Mobile card view */ -}}
    <div class="md:hidden space-y-4 mb-4">
        {{- range .Site.Data.blogroll -}}
        <div
            class="border border-mondrian_black bg-mondrian_white p-4 shadow-mondrian hover:bg-mondrian_bright_white"
        >
            <div class="flex justify-between items-start mb-3">
                <a
                    href="https://{{- .domain -}}"
                    class="flex items-center gap-2 hover:underline hover:text-mondrian_blue transition-colors"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Visit {{- .domain -}}"
                >
                    <span
                        class="w-2 h-2 bg-mondrian_red rounded-full border border-mondrian_black"
                    ></span>
                    <span class="font-mono text-xs text-mondrian_dark_gray"
                        >{{- .domain -}}</span
                    >
                </a>
                <time
                    datetime="{{- .date -}}"
                    class="text-xs font-mono text-mondrian_dark_gray"
                >
                    {{- .date | dateFormat "Jan 2, 2006" -}}
                </time>
            </div>

            <h4 class="text-sm font-medium mb-3 leading-relaxed">
                {{- .title -}}
            </h4>

            <a
                href="{{- .url -}}"
                class="block w-full text-sm py-2 px-3 border border-mondrian_black shadow-mondrian font-mono transition-colors bg-mondrian_white hover:bg-mondrian_blue hover:text-mondrian_white text-center focus:outline focus:outline-offset-2 focus:outline-mondrian_blue"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Open {{- .title -}} in a new tab"
            >
                READ POST →
            </a>
        </div>
        {{- end -}}
    </div>

    {{/* Include any content from the page */}} {{- .Content -}} {{- end -}}
</div>
{{- end -}}
